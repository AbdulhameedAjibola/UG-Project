<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Page - Voting Platform</title>
    <link rel="stylesheet" href="../styles/admin-page.css">
</head>
<body>
    <div id="app">
        <h1>Admin Dashboard</h1>
        
        <section id="overview">
            <h2>Active Elections</h2>
            <ul v-if="activeElections.length">
                <li v-for="election in activeElections" :key="election.id">
                    {{ election.title }} - Ends on {{ election.endDate }}
                </li>
            </ul>
            <p v-else>No active elections at the moment.</p>
        </section>

        <section id="create-election">
            <h2>Create Election/Ballot</h2>
            <form @submit.prevent="createElection">
                <label for="title">Title:</label>
                <input type="text" id="title" v-model="newElection.title" required>
                
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate" v-model="newElection.endDate" required>
                
                <div v-for="(candidate, index) in newElection.candidates" :key="index">
                    <h3>Candidate {{ index + 1 }}</h3>
                    
                    <label :for="'candidateName' + index">Name:</label>
                    <input type="text" :id="'candidateName' + index" v-model="candidate.name" required>
                    
                    <label :for="'candidateAge' + index">Age:</label>
                    <input type="number" :id="'candidateAge' + index" v-model="candidate.age" required>
                    
                    <label :for="'candidateParty' + index">Party:</label>
                    <input type="text" :id="'candidateParty' + index" v-model="candidate.party" required>
                    
                    <label :for="'candidatePicture' + index">Picture:</label>
                    <input type="file" :id="'candidatePicture' + index" @change="handleFileChange($event, index, 'picture')" required>
                    
                    <label :for="'candidatePartySymbol' + index">Party Symbol/Image:</label>
                    <input type="file" :id="'candidatePartySymbol' + index" @change="handleFileChange($event, index, 'partySymbol')" required>
                </div>
                
                <button type="button" @click="addCandidate">Add Candidate</button>
                <button type="submit">Create</button>
            </form>
        </section>
        
        

        <section id="manage-elections">
            <h2>Manage Active Ballots</h2>
            <ul v-if="activeElections.length">
                <li v-for="election in activeElections" :key="election.id">
                    {{ election.title }}
                    <button @click="deleteElection(election.id)">Delete</button>
                </li>
            </ul>
            <p v-else>No active ballots to manage.</p>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="../Javascript/admin-page.js"></script>
</body>
</html>
